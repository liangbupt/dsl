# é“¶è¡Œæ™ºèƒ½å®¢æœæœºå™¨äººè„šæœ¬
# åŠŸèƒ½ï¼šè´¦æˆ·æŸ¥è¯¢ã€è½¬è´¦æ±‡æ¬¾ã€ä¿¡ç”¨å¡æœåŠ¡ã€è´·æ¬¾å’¨è¯¢

bot "é“¶è¡Œæ™ºèƒ½å®¢æœ" {
    # ==================== æ„å›¾å®šä¹‰ ====================
    
    intent é—®å€™ {
        patterns: ["ä½ å¥½", "æ‚¨å¥½", "hi", "åœ¨å—"]
        description: "ç”¨æˆ·æ‰“æ‹›å‘¼"
        examples: ["ä½ å¥½", "å®¢æœåœ¨å—"]
    }
    
    intent è´¦æˆ·æŸ¥è¯¢ {
        patterns: ["ä½™é¢", "è´¦æˆ·", "æŸ¥è¯¢", "å­˜æ¬¾", "æµæ°´", "æ˜ç»†"]
        description: "ç”¨æˆ·æŸ¥è¯¢è´¦æˆ·ä¿¡æ¯"
        examples: ["æŸ¥ä¸€ä¸‹ä½™é¢", "æˆ‘æƒ³çœ‹è´¦æˆ·æ˜ç»†", "è¿˜æœ‰å¤šå°‘é’±"]
    }
    
    intent è½¬è´¦æ±‡æ¬¾ {
        patterns: ["è½¬è´¦", "æ±‡æ¬¾", "ä»˜æ¬¾", "æ‰“é’±", "è½¬é’±"]
        description: "ç”¨æˆ·è¦è¿›è¡Œè½¬è´¦æ“ä½œ"
        examples: ["æˆ‘è¦è½¬è´¦", "æ€ä¹ˆæ±‡æ¬¾", "è½¬è´¦ç»™æœ‹å‹"]
    }
    
    intent ä¿¡ç”¨å¡ {
        patterns: ["ä¿¡ç”¨å¡", "è¿˜æ¬¾", "è´¦å•", "é¢åº¦", "åˆ†æœŸ", "åŠå¡"]
        description: "ä¿¡ç”¨å¡ç›¸å…³æœåŠ¡"
        examples: ["ä¿¡ç”¨å¡è´¦å•", "æˆ‘è¦è¿˜æ¬¾", "æå‡é¢åº¦"]
    }
    
    intent è´·æ¬¾å’¨è¯¢ {
        patterns: ["è´·æ¬¾", "å€Ÿæ¬¾", "åˆ©ç‡", "æˆ¿è´·", "è½¦è´·", "æ¶ˆè´¹è´·"]
        description: "è´·æ¬¾ä¸šåŠ¡å’¨è¯¢"
        examples: ["æƒ³è´·æ¬¾", "æˆ¿è´·åˆ©ç‡å¤šå°‘", "æ€ä¹ˆç”³è¯·è´·æ¬¾"]
    }
    
    intent æŒ‚å¤±å†»ç»“ {
        patterns: ["æŒ‚å¤±", "å†»ç»“", "ä¸¢äº†", "è¢«ç›—", "é”å¡"]
        description: "å¡ç‰‡æŒ‚å¤±æˆ–è´¦æˆ·å†»ç»“"
        examples: ["é“¶è¡Œå¡ä¸¢äº†", "æˆ‘è¦æŒ‚å¤±", "å†»ç»“è´¦æˆ·"]
    }
    
    intent äººå·¥æœåŠ¡ {
        patterns: ["äººå·¥", "è½¬äººå·¥", "å®¢æœç»ç†"]
        description: "è½¬äººå·¥æœåŠ¡"
        examples: ["è½¬äººå·¥", "æ‰¾äººå·¥å®¢æœ"]
    }
    
    intent å‘Šåˆ« {
        patterns: ["å†è§", "è°¢è°¢", "å¥½çš„", "æ²¡äº‹äº†"]
        description: "ç»“æŸå¯¹è¯"
        examples: ["å¥½çš„è°¢è°¢", "å†è§"]
    }
    
    intent ç¡®è®¤ {
        patterns: ["æ˜¯", "å¯¹", "ç¡®è®¤", "å¥½çš„", "å¯ä»¥"]
        description: "ç”¨æˆ·ç¡®è®¤"
    }
    
    intent å¦å®š {
        patterns: ["ä¸", "å¦", "å–æ¶ˆ", "ç®—äº†"]
        description: "ç”¨æˆ·å¦å®š"
    }
    
    # ==================== å˜é‡å®šä¹‰ ====================
    
    var card_number = ""
    var amount = ""
    var target_account = ""
    var loan_type = ""
    var loan_amount = ""
    var verify_code = ""
    
    # ==================== è¾…åŠ©å‡½æ•° ====================
    
    func mask_card_number(number) {
        if length(number) >= 4 {
            return "****" + slice(number, -4)
        }
        return number
    }
    
    func validate_amount(amt) {
        if amt > 0 and amt <= 500000 {
            return true
        }
        return false
    }
    
    # ==================== çŠ¶æ€å®šä¹‰ ====================
    
    state åˆå§‹çŠ¶æ€ initial {
        on_enter {
            say "æ¬¢è¿è‡´ç”µé“¶è¡Œæ™ºèƒ½å®¢æœ ğŸ¦"
            say "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
            say "æˆ‘å¯ä»¥ä¸ºæ‚¨æä¾›ä»¥ä¸‹æœåŠ¡ï¼š"
            say "1ï¸âƒ£ è´¦æˆ·ä½™é¢æŸ¥è¯¢"
            say "2ï¸âƒ£ è½¬è´¦æ±‡æ¬¾"
            say "3ï¸âƒ£ ä¿¡ç”¨å¡æœåŠ¡"
            say "4ï¸âƒ£ è´·æ¬¾å’¨è¯¢"
            say "5ï¸âƒ£ æŒ‚å¤±å†»ç»“"
            say "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
            say "è¯·é—®æ‚¨éœ€è¦åŠç†ä»€ä¹ˆä¸šåŠ¡ï¼Ÿ"
        }
        
        when è´¦æˆ·æŸ¥è¯¢ -> èº«ä»½éªŒè¯
        when è½¬è´¦æ±‡æ¬¾ -> è½¬è´¦éªŒè¯
        when ä¿¡ç”¨å¡ -> ä¿¡ç”¨å¡æœåŠ¡
        when è´·æ¬¾å’¨è¯¢ -> è´·æ¬¾å’¨è¯¢
        when æŒ‚å¤±å†»ç»“ -> ç´§æ€¥æŒ‚å¤±
        when äººå·¥æœåŠ¡ -> è½¬äººå·¥
        when å‘Šåˆ« -> ç»“æŸå¯¹è¯
        when é—®å€™ -> åˆå§‹çŠ¶æ€
        
        fallback {
            say "æŠ±æ­‰ï¼Œæˆ‘æ²¡æœ‰ç†è§£æ‚¨çš„éœ€æ±‚ã€‚"
            say "æ‚¨å¯ä»¥è¯´ï¼šæŸ¥ä½™é¢ã€è½¬è´¦ã€ä¿¡ç”¨å¡ã€è´·æ¬¾ã€æŒ‚å¤± ç­‰ã€‚"
        }
    }
    
    state èº«ä»½éªŒè¯ {
        on_enter {
            say "ä¸ºäº†ä¿æŠ¤æ‚¨çš„è´¦æˆ·å®‰å…¨ï¼Œè¯·å…ˆè¿›è¡Œèº«ä»½éªŒè¯ ğŸ”"
            ask "è¯·è¾“å…¥æ‚¨çš„é“¶è¡Œå¡å·å4ä½ï¼š" -> card_number
            say "éªŒè¯æˆåŠŸï¼å°¾å· " + card_number + " çš„è´¦æˆ·"
            goto è´¦æˆ·ä¿¡æ¯
        }
        
        when å‘Šåˆ« -> ç»“æŸå¯¹è¯
        when å¦å®š -> åˆå§‹çŠ¶æ€
        
        fallback {
            say "è¯·è¾“å…¥é“¶è¡Œå¡å·å4ä½è¿›è¡ŒéªŒè¯ã€‚"
        }
    }
    
    state è´¦æˆ·ä¿¡æ¯ {
        on_enter {
            say "ã€è´¦æˆ·ä¿¡æ¯ã€‘"
            say "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
            say "å¡å·ï¼š****" + card_number
            say "æ´»æœŸä½™é¢ï¼šÂ¥ 25,680.50"
            say "å®šæœŸä½™é¢ï¼šÂ¥ 100,000.00"
            say "ç†è´¢äº§å“ï¼šÂ¥ 50,000.00"
            say "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
            say ""
            say "éœ€è¦æŸ¥çœ‹æœ€è¿‘äº¤æ˜“æ˜ç»†å—ï¼Ÿ"
        }
        
        when ç¡®è®¤ -> äº¤æ˜“æ˜ç»†
        when å¦å®š -> åˆå§‹çŠ¶æ€
        when è½¬è´¦æ±‡æ¬¾ -> è½¬è´¦éªŒè¯
        
        fallback {
            say "è¯·é—®éœ€è¦æŸ¥çœ‹äº¤æ˜“æ˜ç»†å—ï¼Ÿå›å¤"æ˜¯"æˆ–"å¦""
        }
    }
    
    state äº¤æ˜“æ˜ç»† {
        on_enter {
            say "ã€æœ€è¿‘äº¤æ˜“æ˜ç»†ã€‘"
            say "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
            say "11-28 å·¥èµ„æ”¶å…¥    +15,000.00"
            say "11-27 è¶…å¸‚æ¶ˆè´¹    -236.50"
            say "11-26 ç½‘è´­æ¶ˆè´¹    -899.00"
            say "11-25 æ°´ç”µç¼´è´¹    -320.00"
            say "11-24 é¤é¥®æ¶ˆè´¹    -68.00"
            say "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
            say ""
            say "è¯·é—®è¿˜éœ€è¦å…¶ä»–æœåŠ¡å—ï¼Ÿ"
            goto åˆå§‹çŠ¶æ€
        }
    }
    
    state è½¬è´¦éªŒè¯ {
        on_enter {
            say "è½¬è´¦æœåŠ¡ ğŸ’¸"
            say "âš ï¸ è¯·ç¡®ä¿æ”¶æ¬¾ä¿¡æ¯å‡†ç¡®æ— è¯¯"
            ask "è¯·è¾“å…¥æ‚¨çš„é“¶è¡Œå¡å·å4ä½è¿›è¡ŒéªŒè¯ï¼š" -> card_number
            say "éªŒè¯é€šè¿‡ âœ“"
            goto è½¬è´¦è¾“å…¥
        }
        
        when å¦å®š -> åˆå§‹çŠ¶æ€
        
        fallback {
            say "è¯·å…ˆå®Œæˆèº«ä»½éªŒè¯ã€‚"
        }
    }
    
    state è½¬è´¦è¾“å…¥ {
        on_enter {
            ask "è¯·è¾“å…¥æ”¶æ¬¾è´¦å·ï¼š" -> target_account
            say "æ”¶æ¬¾è´¦å·ï¼š" + mask_card_number(target_account)
            ask "è¯·è¾“å…¥è½¬è´¦é‡‘é¢ï¼ˆå…ƒï¼‰ï¼š" -> amount
            goto è½¬è´¦ç¡®è®¤
        }
        
        when å¦å®š -> åˆå§‹çŠ¶æ€
        
        fallback {
            say "è¯·è¾“å…¥æ­£ç¡®çš„æ”¶æ¬¾è´¦å·ã€‚"
        }
    }
    
    state è½¬è´¦ç¡®è®¤ {
        on_enter {
            say "ã€è½¬è´¦ç¡®è®¤ã€‘"
            say "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
            say "ä»˜æ¬¾è´¦æˆ·ï¼š****" + card_number
            say "æ”¶æ¬¾è´¦æˆ·ï¼š" + mask_card_number(target_account)
            say "è½¬è´¦é‡‘é¢ï¼šÂ¥ " + amount
            say "æ‰‹ç»­è´¹ï¼šÂ¥ 0.00"
            say "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
            say ""
            say "ç¡®è®¤è½¬è´¦å—ï¼Ÿï¼ˆæ˜¯/å¦ï¼‰"
        }
        
        when ç¡®è®¤ -> è½¬è´¦æˆåŠŸ
        when å¦å®š -> åˆå§‹çŠ¶æ€
        
        fallback {
            say "è¯·ç¡®è®¤æ˜¯å¦è¿›è¡Œè½¬è´¦ã€‚"
        }
    }
    
    state è½¬è´¦æˆåŠŸ {
        on_enter {
            say "âœ… è½¬è´¦æˆåŠŸï¼"
            say "äº¤æ˜“æµæ°´å·ï¼šTRF20241128" + str(length(amount) * 12345)
            say "èµ„é‡‘å°†åœ¨2å°æ—¶å†…åˆ°è´¦ã€‚"
            say ""
            say "è¯·é—®è¿˜éœ€è¦å…¶ä»–æœåŠ¡å—ï¼Ÿ"
            goto åˆå§‹çŠ¶æ€
        }
    }
    
    state ä¿¡ç”¨å¡æœåŠ¡ {
        on_enter {
            say "ã€ä¿¡ç”¨å¡æœåŠ¡ã€‘ğŸ’³"
            say "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
            say "1. è´¦å•æŸ¥è¯¢"
            say "2. è¿˜æ¬¾æœåŠ¡"
            say "3. é¢åº¦è°ƒæ•´"
            say "4. åˆ†æœŸç”³è¯·"
            say "5. ç§¯åˆ†å…‘æ¢"
            say "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
            say ""
            say "å°¾å·8888ä¿¡ç”¨å¡ä¿¡æ¯ï¼š"
            say "æœ¬æœŸè´¦å•ï¼šÂ¥ 3,680.50"
            say "æœ€ä½è¿˜æ¬¾ï¼šÂ¥ 368.05"
            say "è¿˜æ¬¾æ—¥æœŸï¼šæ¯æœˆ15æ—¥"
            say "å¯ç”¨é¢åº¦ï¼šÂ¥ 46,319.50"
            say ""
            say "è¯·é—®éœ€è¦ä»€ä¹ˆå¸®åŠ©ï¼Ÿ"
        }
        
        when è´¦æˆ·æŸ¥è¯¢ -> ä¿¡ç”¨å¡æœåŠ¡
        when ç¡®è®¤ -> ä¿¡ç”¨å¡è¿˜æ¬¾
        when å¦å®š -> åˆå§‹çŠ¶æ€
        when å‘Šåˆ« -> ç»“æŸå¯¹è¯
        
        fallback {
            say "è¯·é—®æ‚¨éœ€è¦è¿˜æ¬¾è¿˜æ˜¯å…¶ä»–æœåŠ¡ï¼Ÿ"
        }
    }
    
    state ä¿¡ç”¨å¡è¿˜æ¬¾ {
        on_enter {
            say "æ­£åœ¨è·³è½¬åˆ°è¿˜æ¬¾é¡µé¢..."
            say "ğŸ’³ è¿˜æ¬¾æˆåŠŸï¼"
            say "å·²è¿˜æ¬¾ï¼šÂ¥ 3,680.50ï¼ˆå…¨é¢è¿˜æ¬¾ï¼‰"
            say "æœ¬æœŸè´¦å•å·²ç»“æ¸…ã€‚"
            goto åˆå§‹çŠ¶æ€
        }
    }
    
    state è´·æ¬¾å’¨è¯¢ {
        on_enter {
            say "ã€è´·æ¬¾äº§å“ä»‹ç»ã€‘ğŸ "
            say "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
            say "ğŸ“ æˆ¿è´·äº§å“"
            say "   åˆ©ç‡ï¼šLPR+0.3%ï¼ˆå½“å‰4.2%ï¼‰"
            say "   æœŸé™ï¼šæœ€é•¿30å¹´"
            say ""
            say "ğŸš— è½¦è´·äº§å“"
            say "   åˆ©ç‡ï¼š4.5%èµ·"
            say "   æœŸé™ï¼šæœ€é•¿5å¹´"
            say ""
            say "ğŸ’° æ¶ˆè´¹è´·"
            say "   é¢åº¦ï¼šæœ€é«˜50ä¸‡"
            say "   åˆ©ç‡ï¼š5.8%èµ·"
            say "   å®¡æ‰¹ï¼šæœ€å¿«1å°æ—¶"
            say "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
            say ""
            say "è¯·é—®æ‚¨å¯¹å“ªç±»è´·æ¬¾æ„Ÿå…´è¶£ï¼Ÿ"
        }
        
        when ç¡®è®¤ -> è´·æ¬¾ç”³è¯·
        when å¦å®š -> åˆå§‹çŠ¶æ€
        when äººå·¥æœåŠ¡ -> è½¬äººå·¥
        
        fallback {
            say "å¦‚éœ€ç”³è¯·è´·æ¬¾ï¼Œè¯·è¯´"ç”³è¯·"ï¼Œæˆ–è½¬äººå·¥è·å–è¯¦ç»†å’¨è¯¢ã€‚"
        }
    }
    
    state è´·æ¬¾ç”³è¯· {
        on_enter {
            say "è´·æ¬¾ç”³è¯·æµç¨‹ï¼š"
            say "1. åœ¨çº¿æäº¤ç”³è¯·èµ„æ–™"
            say "2. é“¶è¡Œå®¡æ‰¹ï¼ˆ1-3ä¸ªå·¥ä½œæ—¥ï¼‰"
            say "3. ç­¾ç½²åˆåŒ"
            say "4. æ”¾æ¬¾"
            say ""
            say "æ‚¨å¯ä»¥é€šè¿‡æ‰‹æœºé“¶è¡ŒAPPæäº¤ç”³è¯·ï¼Œ"
            say "æˆ–å‰å¾€å°±è¿‘ç½‘ç‚¹åŠç†ã€‚"
            say ""
            say "éœ€è¦é¢„çº¦ç½‘ç‚¹åŠç†å—ï¼Ÿ"
            goto åˆå§‹çŠ¶æ€
        }
    }
    
    state ç´§æ€¥æŒ‚å¤± {
        on_enter {
            say "ğŸš¨ ç´§æ€¥æŒ‚å¤±æœåŠ¡"
            say "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
            say "æ£€æµ‹åˆ°æŒ‚å¤±è¯·æ±‚ï¼Œå°†ç«‹å³å¤„ç†ï¼"
            ask "è¯·è¾“å…¥éœ€è¦æŒ‚å¤±çš„å¡å·å4ä½ï¼š" -> card_number
            say ""
            say "âš ï¸ è­¦å‘Šï¼šæŒ‚å¤±åè¯¥å¡å°†ç«‹å³åœç”¨ï¼"
            say "ç¡®è®¤æŒ‚å¤±å°¾å· " + card_number + " çš„é“¶è¡Œå¡å—ï¼Ÿ"
            goto æŒ‚å¤±ç¡®è®¤
        }
        
        when å¦å®š -> åˆå§‹çŠ¶æ€
        
        fallback {
            say "è¯·æä¾›éœ€è¦æŒ‚å¤±çš„å¡å·å4ä½ã€‚"
        }
    }
    
    state æŒ‚å¤±ç¡®è®¤ {
        on_enter {
            say "ç¡®è®¤æŒ‚å¤±å—ï¼Ÿï¼ˆæ˜¯/å¦ï¼‰"
        }
        
        when ç¡®è®¤ -> æŒ‚å¤±æˆåŠŸ
        when å¦å®š -> åˆå§‹çŠ¶æ€
        
        fallback {
            say "è¯·ç¡®è®¤æ˜¯å¦æŒ‚å¤±ã€‚"
        }
    }
    
    state æŒ‚å¤±æˆåŠŸ {
        on_enter {
            say "âœ… æŒ‚å¤±æˆåŠŸï¼"
            say "å°¾å· " + card_number + " çš„é“¶è¡Œå¡å·²å†»ç»“ã€‚"
            say ""
            say "ã€åç»­æ­¥éª¤ã€‘"
            say "1. è¯·æºå¸¦èº«ä»½è¯åˆ°ç½‘ç‚¹è¡¥åŠæ–°å¡"
            say "2. å¦‚æœ‰ç›—åˆ·æƒ…å†µï¼Œè¯·ç«‹å³æŠ¥è­¦"
            say "3. å®¢æœç”µè¯ï¼š95588"
            say ""
            say "è¯·é—®è¿˜éœ€è¦å…¶ä»–å¸®åŠ©å—ï¼Ÿ"
            goto åˆå§‹çŠ¶æ€
        }
    }
    
    state è½¬äººå·¥ {
        on_enter {
            say "æ­£åœ¨ä¸ºæ‚¨è½¬æ¥äººå·¥å®¢æœ... ğŸ‘¨â€ğŸ’¼"
            say "å½“å‰ç­‰å¾…äººæ•°ï¼š2äºº"
            say "é¢„è®¡ç­‰å¾…æ—¶é—´ï¼š3åˆ†é’Ÿ"
            say ""
            say "æ‚¨ä¹Ÿå¯ä»¥æ‹¨æ‰“å®¢æœçƒ­çº¿ï¼š95588"
            say "äººå·¥æœåŠ¡æ—¶é—´ï¼š9:00-21:00"
            say ""
            say "ç»§ç»­ç­‰å¾…è¯·è¯´"ç­‰å¾…"ï¼Œè¿”å›è‡ªåŠ©æœåŠ¡è¯·è¯´"è¿”å›""
        }
        
        when ç¡®è®¤ -> è½¬äººå·¥
        when å¦å®š -> åˆå§‹çŠ¶æ€
        
        fallback {
            say "äººå·¥å®¢æœæ’é˜Ÿä¸­..."
        }
    }
    
    state ç»“æŸå¯¹è¯ final {
        on_enter {
            say "æ„Ÿè°¢æ‚¨ä½¿ç”¨é“¶è¡Œæ™ºèƒ½å®¢æœï¼ ğŸ¦"
            say "ç¥æ‚¨ç”Ÿæ´»æ„‰å¿«ï¼Œå†è§ï¼"
            say ""
            say "ã€æ¸©é¦¨æç¤ºã€‘"
            say "è¯·å‹¿å‘ä»–äººé€éœ²å¯†ç ã€éªŒè¯ç ç­‰æ•æ„Ÿä¿¡æ¯"
        }
    }
}

# ç”µå•†å®¢æœæœºå™¨äººè„šæœ¬
# åŠŸèƒ½ï¼šè®¢å•æŸ¥è¯¢ã€é€€è´§é€€æ¬¾ã€å•†å“å’¨è¯¢

bot "ç”µå•†æ™ºèƒ½å®¢æœ" {
    # ==================== æ„å›¾å®šä¹‰ ====================
    
    intent é—®å€™ {
        patterns: ["ä½ å¥½", "æ‚¨å¥½", "hi", "hello", "åœ¨å—", "åœ¨ä¸åœ¨"]
        description: "ç”¨æˆ·æ‰“æ‹›å‘¼æˆ–é—®å€™"
        examples: ["ä½ å¥½å‘€", "å®¢æœåœ¨å—", "æœ‰äººå—"]
    }
    
    intent æŸ¥è¯¢è®¢å• {
        patterns: ["è®¢å•", "ç‰©æµ", "å¿«é€’", "å‘è´§", "åˆ°å“ªäº†", "ä»€ä¹ˆæ—¶å€™åˆ°"]
        description: "ç”¨æˆ·æƒ³è¦æŸ¥è¯¢è®¢å•çŠ¶æ€æˆ–ç‰©æµä¿¡æ¯"
        examples: ["æˆ‘çš„è®¢å•åˆ°å“ªäº†", "å¸®æˆ‘æŸ¥ä¸€ä¸‹ç‰©æµ", "ä»€ä¹ˆæ—¶å€™å‘è´§"]
    }
    
    intent é€€è´§é€€æ¬¾ {
        patterns: ["é€€è´§", "é€€æ¬¾", "é€€é’±", "æ¢è´§", "ä¸è¦äº†", "å–æ¶ˆè®¢å•"]
        description: "ç”¨æˆ·æƒ³è¦é€€è´§æˆ–ç”³è¯·é€€æ¬¾"
        examples: ["æˆ‘è¦é€€è´§", "æ€ä¹ˆç”³è¯·é€€æ¬¾", "å¯ä»¥æ¢è´§å—"]
    }
    
    intent å•†å“å’¨è¯¢ {
        patterns: ["ä»·æ ¼", "å¤šå°‘é’±", "æœ‰è´§å—", "åº“å­˜", "è§„æ ¼", "å°ºå¯¸", "é¢œè‰²"]
        description: "ç”¨æˆ·å’¨è¯¢å•†å“ä¿¡æ¯"
        examples: ["è¿™ä¸ªå¤šå°‘é’±", "æœ‰æ²¡æœ‰è´§", "ä»€ä¹ˆé¢œè‰²çš„"]
    }
    
    intent æŠ•è¯‰å»ºè®® {
        patterns: ["æŠ•è¯‰", "ä¸¾æŠ¥", "æœåŠ¡å·®", "æ€åº¦", "å»ºè®®", "ä¸æ»¡æ„"]
        description: "ç”¨æˆ·è¦æŠ•è¯‰æˆ–æå»ºè®®"
        examples: ["æˆ‘è¦æŠ•è¯‰", "æœåŠ¡å¤ªå·®äº†", "æˆ‘æœ‰ä¸ªå»ºè®®"]
    }
    
    intent äººå·¥å®¢æœ {
        patterns: ["äººå·¥", "è½¬äººå·¥", "çœŸäºº", "å®¢æœ", "æ‰¾äºº"]
        description: "ç”¨æˆ·è¦æ±‚è½¬äººå·¥å®¢æœ"
        examples: ["è½¬äººå·¥å®¢æœ", "æˆ‘è¦æ‰¾çœŸäºº", "è®©äººæ¥æ¥"]
    }
    
    intent å‘Šåˆ« {
        patterns: ["å†è§", "æ‹œæ‹œ", "æ²¡äº‹äº†", "å¥½çš„è°¢è°¢", "è§£å†³äº†"]
        description: "ç”¨æˆ·è¡¨ç¤ºç»“æŸå¯¹è¯"
        examples: ["å¥½çš„å†è§", "æ²¡é—®é¢˜äº†", "è°¢è°¢æ‹œæ‹œ"]
    }
    
    intent ç¡®è®¤ {
        patterns: ["æ˜¯", "å¯¹", "å¥½", "å¯ä»¥", "ç¡®è®¤", "æ²¡é”™"]
        description: "ç”¨æˆ·ç¡®è®¤"
        examples: ["æ˜¯çš„", "å¯¹çš„", "å¥½çš„"]
    }
    
    intent å¦å®š {
        patterns: ["ä¸", "ä¸æ˜¯", "ä¸å¯¹", "ä¸è¦", "ç®—äº†", "å–æ¶ˆ"]
        description: "ç”¨æˆ·å¦å®š"
        examples: ["ä¸æ˜¯", "ä¸å¯¹", "ç®—äº†å§"]
    }
    
    # ==================== å˜é‡å®šä¹‰ ====================
    
    var order_id = ""
    var product_name = ""
    var refund_reason = ""
    var customer_phone = ""
    var complaint_content = ""
    
    # ==================== è¾…åŠ©å‡½æ•° ====================
    
    func validate_order_id(id) {
        # è®¢å•å·åº”è¯¥æ˜¯10-20ä½æ•°å­—
        if length(id) >= 10 and length(id) <= 20 {
            return true
        }
        return false
    }
    
    func format_order_status(status) {
        if status == "pending" {
            return "å¾…å‘è´§"
        } elif status == "shipped" {
            return "å·²å‘è´§"
        } elif status == "delivered" {
            return "å·²é€è¾¾"
        } else {
            return "æœªçŸ¥çŠ¶æ€"
        }
    }
    
    # ==================== çŠ¶æ€å®šä¹‰ ====================
    
    state æ¬¢è¿çŠ¶æ€ initial {
        on_enter {
            say "æ‚¨å¥½ï¼æ¬¢è¿æ¥åˆ°ç”µå•†æ™ºèƒ½å®¢æœã€‚ğŸ›’"
            say "æˆ‘å¯ä»¥å¸®æ‚¨ï¼šæŸ¥è¯¢è®¢å•ã€é€€è´§é€€æ¬¾ã€å•†å“å’¨è¯¢ç­‰ã€‚"
            say "è¯·é—®æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©æ‚¨çš„ï¼Ÿ"
        }
        
        when æŸ¥è¯¢è®¢å• -> è®¢å•æŸ¥è¯¢
        when é€€è´§é€€æ¬¾ -> é€€æ¬¾ç”³è¯·
        when å•†å“å’¨è¯¢ -> å•†å“å’¨è¯¢
        when æŠ•è¯‰å»ºè®® -> æŠ•è¯‰å¤„ç†
        when äººå·¥å®¢æœ -> è½¬äººå·¥
        when å‘Šåˆ« -> ç»“æŸçŠ¶æ€
        when é—®å€™ -> æ¬¢è¿çŠ¶æ€
        
        fallback {
            say "æŠ±æ­‰ï¼Œæˆ‘æ²¡æœ‰å®Œå…¨ç†è§£æ‚¨çš„æ„æ€ã€‚"
            say "æ‚¨å¯ä»¥è¯´ï¼šæŸ¥è¯¢è®¢å•ã€é€€è´§é€€æ¬¾ã€å•†å“å’¨è¯¢ ç­‰å…³é”®è¯ã€‚"
        }
    }
    
    state è®¢å•æŸ¥è¯¢ {
        on_enter {
            say "å¥½çš„ï¼Œæˆ‘æ¥å¸®æ‚¨æŸ¥è¯¢è®¢å•ã€‚ğŸ“¦"
            ask "è¯·å‘Šè¯‰æˆ‘æ‚¨çš„è®¢å•å·ï¼ˆ10-20ä½æ•°å­—ï¼‰ï¼š" -> order_id
            say "æ­£åœ¨æŸ¥è¯¢è®¢å• " + order_id + " ..."
            say "ã€è®¢å•ä¿¡æ¯ã€‘"
            say "è®¢å•å·ï¼š" + order_id
            say "çŠ¶æ€ï¼šå·²å‘è´§ ğŸšš"
            say "é¢„è®¡é€è¾¾ï¼š2-3ä¸ªå·¥ä½œæ—¥"
            say "ç‰©æµå…¬å¸ï¼šé¡ºä¸°é€Ÿè¿"
            say ""
            say "è¯·é—®è¿˜æœ‰å…¶ä»–é—®é¢˜å—ï¼Ÿ"
            goto æ¬¢è¿çŠ¶æ€
        }
        
        when å‘Šåˆ« -> ç»“æŸçŠ¶æ€
        when äººå·¥å®¢æœ -> è½¬äººå·¥
        
        fallback {
            say "è¯·è¾“å…¥æ‚¨çš„è®¢å•å·ï¼Œæˆ‘æ¥å¸®æ‚¨æŸ¥è¯¢ã€‚"
        }
    }
    
    state é€€æ¬¾ç”³è¯· {
        on_enter {
            say "å¥½çš„ï¼Œæˆ‘æ¥å¸®æ‚¨å¤„ç†é€€è´§é€€æ¬¾ã€‚ğŸ’°"
            ask "è¯·å…ˆå‘Šè¯‰æˆ‘æ‚¨çš„è®¢å•å·ï¼š" -> order_id
            say "è®¢å• " + order_id + " å·²æ‰¾åˆ°ã€‚"
            ask "è¯·é—®é€€è´§åŸå› æ˜¯ï¼Ÿï¼ˆå¦‚ï¼šè´¨é‡é—®é¢˜/ä¸å–œæ¬¢/å°ºç ä¸åˆé€‚ï¼‰" -> refund_reason
            goto é€€æ¬¾ç¡®è®¤
        }
        
        when å‘Šåˆ« -> ç»“æŸçŠ¶æ€
        when äººå·¥å®¢æœ -> è½¬äººå·¥
        
        fallback {
            say "è¯·æä¾›æ‚¨è¦é€€æ¬¾çš„è®¢å•å·ã€‚"
        }
    }
    
    state é€€æ¬¾ç¡®è®¤ {
        on_enter {
            say "ã€é€€æ¬¾ç”³è¯·ä¿¡æ¯ã€‘"
            say "è®¢å•å·ï¼š" + order_id
            say "é€€æ¬¾åŸå› ï¼š" + refund_reason
            say ""
            say "ç¡®è®¤æäº¤é€€æ¬¾ç”³è¯·å—ï¼Ÿï¼ˆæ˜¯/å¦ï¼‰"
        }
        
        when ç¡®è®¤ -> é€€æ¬¾æˆåŠŸ
        when å¦å®š -> æ¬¢è¿çŠ¶æ€
        
        fallback {
            say "è¯·å›å¤"æ˜¯"ç¡®è®¤æäº¤ï¼Œæˆ–"å¦"å–æ¶ˆç”³è¯·ã€‚"
        }
    }
    
    state é€€æ¬¾æˆåŠŸ {
        on_enter {
            say "âœ… é€€æ¬¾ç”³è¯·å·²æäº¤æˆåŠŸï¼"
            say "é€€æ¬¾å°†åœ¨1-3ä¸ªå·¥ä½œæ—¥å†…å¤„ç†ã€‚"
            say "æ‚¨å¯ä»¥åœ¨ã€æˆ‘çš„è®¢å•ã€‘ä¸­æŸ¥çœ‹é€€æ¬¾è¿›åº¦ã€‚"
            say ""
            say "è¯·é—®è¿˜æœ‰å…¶ä»–é—®é¢˜å—ï¼Ÿ"
            goto æ¬¢è¿çŠ¶æ€
        }
    }
    
    state å•†å“å’¨è¯¢ {
        on_enter {
            say "å¥½çš„ï¼Œæˆ‘æ¥å¸®æ‚¨äº†è§£å•†å“ä¿¡æ¯ã€‚ğŸ·ï¸"
            ask "è¯·é—®æ‚¨æƒ³å’¨è¯¢å“ªä¸ªå•†å“ï¼Ÿ" -> product_name
            say "ã€å•†å“ä¿¡æ¯ã€‘" + product_name
            say "ä»·æ ¼ï¼šÂ¥299.00"
            say "åº“å­˜ï¼šæœ‰è´§ âœ“"
            say "é¢œè‰²ï¼šé»‘è‰²/ç™½è‰²/è“è‰²"
            say "è§„æ ¼ï¼šS/M/L/XL"
            say ""
            say "è¯·é—®è¿˜æƒ³äº†è§£ä»€ä¹ˆï¼Ÿ"
            goto æ¬¢è¿çŠ¶æ€
        }
        
        when å‘Šåˆ« -> ç»“æŸçŠ¶æ€
        when äººå·¥å®¢æœ -> è½¬äººå·¥
        
        fallback {
            say "è¯·å‘Šè¯‰æˆ‘æ‚¨æƒ³å’¨è¯¢çš„å•†å“åç§°ã€‚"
        }
    }
    
    state æŠ•è¯‰å¤„ç† {
        on_enter {
            say "éå¸¸æŠ±æ­‰ç»™æ‚¨å¸¦æ¥ä¸å¥½çš„ä½“éªŒã€‚ğŸ˜”"
            say "æˆ‘ä»¬ä¼šè®¤çœŸå¯¹å¾…æ‚¨çš„åé¦ˆã€‚"
            ask "è¯·è¯¦ç»†æè¿°æ‚¨çš„é—®é¢˜æˆ–å»ºè®®ï¼š" -> complaint_content
            ask "ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬è”ç³»æ‚¨ï¼Œè¯·ç•™ä¸‹æ‚¨çš„æ‰‹æœºå·ï¼š" -> customer_phone
            say ""
            say "æ„Ÿè°¢æ‚¨çš„åé¦ˆï¼ğŸ“"
            say "æˆ‘ä»¬ä¼šåœ¨24å°æ—¶å†…ä¸æ‚¨è”ç³»å¤„ç†ã€‚"
            say "å·¥å•å·ï¼šCP20231216001"
            goto æ¬¢è¿çŠ¶æ€
        }
        
        when å‘Šåˆ« -> ç»“æŸçŠ¶æ€
        
        fallback {
            say "è¯·æè¿°æ‚¨é‡åˆ°çš„é—®é¢˜ï¼Œæˆ‘ä»¬ä¼šè®¤çœŸå¤„ç†ã€‚"
        }
    }
    
    state è½¬äººå·¥ {
        on_enter {
            say "æ­£åœ¨ä¸ºæ‚¨è½¬æ¥äººå·¥å®¢æœ... ğŸ‘¨â€ğŸ’¼"
            say "å½“å‰æ’é˜Ÿäººæ•°ï¼š3äºº"
            say "é¢„è®¡ç­‰å¾…æ—¶é—´ï¼š2åˆ†é’Ÿ"
            say ""
            say "æ‚¨ä¹Ÿå¯ä»¥ç»§ç»­å’Œæˆ‘å¯¹è¯ï¼Œè¯´"å–æ¶ˆ"è¿”å›è‡ªåŠ©æœåŠ¡ã€‚"
        }
        
        when å¦å®š -> æ¬¢è¿çŠ¶æ€
        
        fallback {
            say "äººå·¥å®¢æœç¹å¿™ä¸­ï¼Œè¯·ç¨ç­‰..."
            say "æ‚¨å¯ä»¥å…ˆå‘Šè¯‰æˆ‘æ‚¨çš„é—®é¢˜ï¼Œæˆ‘ä¼šå°½åŠ›å¸®åŠ©æ‚¨ã€‚"
        }
    }
    
    state ç»“æŸçŠ¶æ€ final {
        on_enter {
            say "æ„Ÿè°¢æ‚¨ä½¿ç”¨ç”µå•†æ™ºèƒ½å®¢æœï¼ğŸ‘‹"
            say "ç¥æ‚¨è´­ç‰©æ„‰å¿«ï¼Œå†è§ï¼"
        }
    }
}
